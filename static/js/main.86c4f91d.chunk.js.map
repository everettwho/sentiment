{"version":3,"sources":["app.module.css","components/loading-spinner/facebook-loader.module.css","components/chart/chart.module.css","components/loading-spinner/facebook-loader.jsx","components/chart/generic-chart.jsx","app.jsx","lib/string-utils.js","index.js"],"names":["module","exports","container","chartContainer","loadingFacebook","title","FacebookLoader","react_default","a","createElement","className","styles","CustomTooltip","_ref","datum","text","style","otherProps","Object","objectWithoutProperties","victory_tooltip","assign","format","Date","x","concat","toConsumableArray","objectSpread","fontWeight","defaultEvents","VictoryTooltip","theme","VictoryTheme","material","chart","scale","padding","top","right","bottom","left","domain","y","GenericChart","_ref2","chartConfig","maxDataPoints","maximaMinima","_","reduce","acc","_ref3","key","data","maxima","Math","max","apply","map","d","minima","min","diff","size","lib_default","_ref4","width","victory_chart","height","domainPadding","containerComponent","victory_voronoi_container","voronoiDimension","voronoiBlacklist","keys","labels","_ref5","_chartConfig$key","label","formatValue","labelComponent","generic_chart_CustomTooltip","cornerRadius","flyoutStyle","fill","_ref6","color","victory_line","name","stroke","_ref7","_maximaMinima$key","_ref8","victory_scatter","active","_ref9","_maximaMinima$key2","index","victory_axis","dependentAxis","offsetX","tickValues","tickLabelComponent","victory_label","dx","textAnchor","tickFormat","_maximaMinima$key3","tickLabels","angle","idx","victory_legend","CHART_HEIGHT","orientation","gutter","borderPadding","border","fontSize","_ref10","symbol","trimData","daysToShow","arguments","length","undefined","returnData","cutOff","subDays","forEach","reverse","dataEntry","differenceInDays","unshift","App","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","historicalBtcPrices","isLoadingHistoricalBtcPrices","_this2","today","past","subYears","url","fetch","then","res","json","result","setState","bpi","btcPrice","sortBy","price","date","num","numeral","formatDollars","dailyComments","dailyData","timestamp","value","round","generic_chart","facebook_loader","renderCharts","Component","ReactDOM","render","app","document","getElementById"],"mappings":"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","file":"static/js/main.86c4f91d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"app_container__2u_on\",\"chartContainer\":\"app_chartContainer__3dA0Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loadingFacebook\":\"facebook-loader_loadingFacebook__2wu_i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"chart_title__sURpV\"};","import React from 'react';\nimport styles from './facebook-loader.module.css';\n\nconst FacebookLoader = () => (\n  <div className={styles.loadingFacebook}>\n    <div />\n    <div />\n    <div />\n  </div>\n);\n\nexport default FacebookLoader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { format } from 'date-fns';\nimport ContainerDimensions from 'react-container-dimensions';\nimport _ from 'lodash';\n\nimport {\n  VictoryChart,\n  VictoryTheme,\n  VictoryAxis,\n  VictoryLine,\n  VictoryScatter,\n  VictoryTooltip,\n  VictoryLegend,\n  VictoryLabel,\n  VictoryVoronoiContainer,\n} from 'victory';\n\nimport styles from './chart.module.css';\n\nconst CustomTooltip = ({ datum, text, style, ...otherProps }) => (\n  <VictoryTooltip\n    {...otherProps}\n    datum={datum}\n    text={[format(new Date(datum.x), 'MMM D, YYYY'), ...text]}\n    style={[{ ...style[0], fontWeight: 'bold' }, ...style]}\n  />\n);\n\nCustomTooltip.defaultEvents = VictoryTooltip.defaultEvents;\n\nCustomTooltip.propTypes = {\n  datum: PropTypes.shape().isRequired,\n  text: PropTypes.arrayOf(PropTypes.string).isRequired,\n  style: PropTypes.arrayOf(PropTypes.shape()).isRequired,\n};\n\nconst CHART_HEIGHT = 480;\nconst NORMALIZATION_PADDING = 0.1;\n\nconst theme = {\n  ...VictoryTheme.material,\n  chart: {\n    scale: { x: 'time' },\n    padding: { top: 64, right: 64, bottom: 180, left: 80 },\n    domain: { y: [0, 1.25] },\n  },\n};\n\nconst GenericChart = ({ title, chartConfig }) => {\n  let maxDataPoints = 0;\n\n  const maximaMinima = _.reduce(\n    chartConfig,\n    (acc, { data }, key) => {\n      const maxima = Math.max(..._.map(data, d => d.y));\n      const minima = Math.min(..._.map(data, d => d.y));\n      acc[key] = { maxima, minima, diff: maxima - minima };\n\n      if (_.size(data) > maxDataPoints) maxDataPoints = _.size(data);\n      return acc;\n    },\n    {}\n  );\n\n  return (\n    <div>\n      <div className={styles.title}>{title}</div>\n      <ContainerDimensions>\n        {({ width }) => (\n          <VictoryChart\n            width={width}\n            height={CHART_HEIGHT}\n            theme={theme}\n            domainPadding={{ x: width / maxDataPoints }}\n            containerComponent={\n              <VictoryVoronoiContainer\n                voronoiDimension=\"x\"\n                voronoiBlacklist={_.map(_.keys(chartConfig), key => `${key}Line`)}\n                labels={({ y, key }) => {\n                  const { label, formatValue } = chartConfig[key];\n                  return `${label}: ${formatValue(y)}`;\n                }}\n                labelComponent={<CustomTooltip cornerRadius={4} flyoutStyle={{ fill: 'white' }} />}\n              />\n            }\n          >\n            {_.map(chartConfig, ({ color, data }, key) => (\n              <VictoryLine\n                key={key}\n                name={`${key}Line`}\n                data={data}\n                style={{ data: { stroke: color } }}\n                y={({ y }) => {\n                  const { minima, diff } = maximaMinima[key];\n                  return (y - minima) / diff + NORMALIZATION_PADDING;\n                }}\n              />\n            ))}\n\n            {_.map(chartConfig, ({ color, data }, key) => (\n              <VictoryScatter\n                key={key}\n                data={data}\n                size={(d, active) => (active ? 4 : 2)}\n                style={{ data: { fill: color } }}\n                y={({ y }) => {\n                  const { minima, diff } = maximaMinima[key];\n                  return (y - minima) / diff + NORMALIZATION_PADDING;\n                }}\n              />\n            ))}\n\n            {_.map(_.keys(chartConfig), (key, index) => (\n              <VictoryAxis\n                key={key}\n                dependentAxis\n                offsetX={index ? width - 64 : 80}\n                tickValues={[0, 0.25, 0.5, 0.75, 1, 1.25]}\n                tickLabelComponent={\n                  <VictoryLabel\n                    dx={index ? 20 : 0}\n                    style={{ textAnchor: index ? 'start' : 'end' }}\n                  />\n                }\n                tickFormat={y => {\n                  const { minima, diff } = maximaMinima[key];\n                  return chartConfig[key].formatValue(minima + (y - NORMALIZATION_PADDING) * diff);\n                }}\n              />\n            ))}\n\n            <VictoryAxis\n              style={{ tickLabels: { angle: 32, padding: 12, textAnchor: 'start' } }}\n              tickFormat={(x, idx) => (idx % 4 === 0 ? format(new Date(x), 'MMM D') : '')}\n            />\n\n            <VictoryLegend\n              x={width / 2 - 120}\n              y={CHART_HEIGHT - 96}\n              orientation=\"horizontal\"\n              gutter={12}\n              borderPadding={{ top: 12, right: 16, bottom: 12, left: 16 }}\n              style={{ border: { stroke: 'black' }, title: { fontSize: 20 } }}\n              data={_.map(chartConfig, ({ color, label }) => ({\n                name: label,\n                symbol: { fill: color },\n              }))}\n            />\n          </VictoryChart>\n        )}\n      </ContainerDimensions>\n    </div>\n  );\n};\n\nGenericChart.propTypes = {\n  title: PropTypes.string.isRequired,\n  chartConfig: PropTypes.shape().isRequired,\n};\n\nexport default GenericChart;\n","import React, { Component } from 'react';\nimport { format, subYears, subDays, differenceInDays } from 'date-fns';\nimport _ from 'lodash';\n\nimport { FacebookLoader } from './components/loading-spinner';\nimport { GenericChart } from './components/chart';\nimport { formatDollars } from './lib/string-utils';\n\nimport dailyData from './temp_data/daily.json';\nimport styles from './app.module.css';\n\nconst COINDESK_DATE_FORMAT = 'YYYY-MM-DD';\nconst DEFAULT_DAYS_TO_SHOW = 60;\n\nconst trimData = (data, daysToShow = DEFAULT_DAYS_TO_SHOW) => {\n  const returnData = [];\n  const cutOff = subDays(new Date(), daysToShow);\n\n  _.forEach(_.reverse(data), dataEntry => {\n    if (differenceInDays(cutOff, new Date(dataEntry.x)) <= 0) {\n      returnData.unshift(dataEntry);\n    }\n  });\n\n  return returnData;\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      historicalBtcPrices: [],\n      isLoadingHistoricalBtcPrices: true,\n    };\n  }\n\n  componentDidMount() {\n    const today = format(new Date(), COINDESK_DATE_FORMAT);\n    const past = format(subYears(new Date(), 2), COINDESK_DATE_FORMAT);\n    const url = `https://api.coindesk.com/v1/bpi/historical/close.json?start=${past}&end=${today}`;\n    fetch(url)\n      .then(res => res.json())\n      .then(result => {\n        this.setState({\n          isLoadingHistoricalBtcPrices: false,\n          historicalBtcPrices: result.bpi,\n        });\n      });\n  }\n\n  renderCharts() {\n    const { historicalBtcPrices } = this.state;\n\n    const chartConfig = {\n      btcPrice: {\n        label: 'BTC Price',\n        color: 'blue',\n        data: trimData(\n          _.sortBy(\n            _.map(historicalBtcPrices, (price, date) => ({\n              x: date,\n              y: price,\n              key: 'btcPrice',\n            })),\n            'x'\n          )\n        ),\n        formatValue: num => formatDollars(num),\n      },\n      dailyComments: {\n        label: '# Daily Comments',\n        color: 'brown',\n        data: trimData(\n          _.map(dailyData, ({ timestamp, value }) => ({\n            x: format(new Date(timestamp), COINDESK_DATE_FORMAT),\n            y: value,\n            key: 'dailyComments',\n          }))\n        ),\n        formatValue: num => Math.round(num),\n      },\n    };\n\n    return (\n      <div className={styles.chartContainer}>\n        <GenericChart\n          title=\"BitcoinMarkets daily comments vs. BTC price\"\n          chartConfig={chartConfig}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const { isLoadingHistoricalBtcPrices } = this.state;\n\n    return (\n      <div className={styles.container}>\n        {isLoadingHistoricalBtcPrices ? <FacebookLoader /> : this.renderCharts()}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import numeral from 'numeral';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const formatDollars = num => numeral(num).format('$0,0');\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}